# æ€§èƒ½åˆ†æžå·¥å…·å¯¹æ¯”ä¸Žé€‰æ‹©æŒ‡å—

## ðŸŽ¯ å·¥å…·å¯¹æ¯”æ€»è§ˆ

æœ¬æ–‡æ¡£æä¾›**å…¨é¢çš„æ€§èƒ½åˆ†æžå·¥å…·å¯¹æ¯”**ï¼Œå¸®åŠ©ä½ æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„å·¥å…·ç»„åˆã€‚

### ðŸ“Š æ ¸å¿ƒå·¥å…·ç‰¹æ€§å¯¹æ¯”è¡¨

| ç‰¹æ€§ç»´åº¦ | gprof | perf | Valgrind/Callgrind | Intel VTune |
|----------|-------|------|-------------------|--------------|
| **ðŸ”§ æ˜“ç”¨æ€§** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­â­ |
| **ðŸ“Š ç²¾ç¡®åº¦** | â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **âš¡ æ€§èƒ½å¼€é”€** | â­â­â­ | â­â­â­â­â­ | â­ | â­â­â­â­ |
| **ðŸ” åˆ†æžæ·±åº¦** | â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **ðŸ–¥ï¸ å¯è§†åŒ–** | â­ | â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| **ðŸ’° æˆæœ¬** | å…è´¹ | å…è´¹ | å…è´¹ | å•†ä¸š/å…è´¹ç‰ˆ |
| **ðŸŒ è·¨å¹³å°** | âœ… | Linuxä¸»è¦ | âœ… | âœ… |
| **ðŸ“š å­¦ä¹ æ›²çº¿** | ä½Ž | ä¸­ç­‰ | ä¸­é«˜ | ä¸­é«˜ |

---

## ðŸ”¬ è¯¦ç»†å¯¹æ¯”åˆ†æž

### ðŸ”§ GNU gprof

#### âœ… ä¼˜åŠ¿
- **å…¥é—¨å‹å¥½** - æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
- **å¹¿æ³›å¯ç”¨** - å‡ ä¹Žæ‰€æœ‰Unix/Linuxç³»ç»Ÿæ ‡é…
- **è½»é‡çº§** - å¯¹ç¨‹åºå½±å“ç›¸å¯¹è¾ƒå°
- **æ ‡å‡†åŒ–** - è¡Œä¸šæ ‡å‡†çš„åŸºç¡€åˆ†æžå·¥å…·

#### âŒ åŠ£åŠ¿
- **ç²¾åº¦æœ‰é™** - åŸºäºŽé‡‡æ ·ï¼Œå¯èƒ½é—æ¼çŸ­æ—¶é—´å‡½æ•°
- **å¤šçº¿ç¨‹æ”¯æŒå·®** - ä¸»è¦åˆ†æžä¸»çº¿ç¨‹
- **ç³»ç»Ÿè°ƒç”¨ç›²åŒº** - ä¸åˆ†æžI/Oå’Œç³»ç»Ÿè°ƒç”¨æ—¶é—´
- **ç¼ºä¹çŽ°ä»£ç‰¹æ€§** - æ— æ³•åˆ†æžç¼“å­˜ã€åˆ†æ”¯é¢„æµ‹ç­‰

#### ðŸŽ¯ æœ€ä½³é€‚ç”¨åœºæ™¯
```
âœ… é€‚åˆåœºæ™¯:
- å­¦ä¹ æ€§èƒ½åˆ†æžæ¦‚å¿µ
- å¿«é€Ÿè¯†åˆ«CPUçƒ­ç‚¹å‡½æ•°
- å•çº¿ç¨‹ç¨‹åºåˆ†æž
- å¼€å‘çŽ¯å¢ƒçš„åˆæ­¥åˆ†æž
- å‡½æ•°è°ƒç”¨å…³ç³»åˆ†æž

âŒ ä¸é€‚åˆåœºæ™¯:
- å¤šçº¿ç¨‹ç¨‹åºåˆ†æž
- ç³»ç»Ÿçº§æ€§èƒ½é—®é¢˜
- I/Oå¯†é›†åž‹ç¨‹åº
- éœ€è¦ç¡¬ä»¶çº§åˆ†æž
- ç”Ÿäº§çŽ¯å¢ƒåˆ†æž
```

### âš¡ Linux perf

#### âœ… ä¼˜åŠ¿
- **ä½Žå¼€é”€** - åŸºäºŽç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨ï¼Œå¼€é”€å¾ˆå°
- **ç³»ç»Ÿçº§åˆ†æž** - å¯ä»¥åˆ†æžæ•´ä¸ªç³»ç»Ÿ
- **å®žæ—¶èƒ½åŠ›** - æ”¯æŒå®žæ—¶ç›‘æŽ§å’Œåˆ†æž
- **ç¡¬ä»¶æ”¯æŒ** - åˆ©ç”¨çŽ°ä»£CPUçš„ç¡¬ä»¶ç‰¹æ€§
- **ä¸°å¯Œäº‹ä»¶** - æ”¯æŒå¤§é‡ç¡¬ä»¶å’Œè½¯ä»¶äº‹ä»¶

#### âŒ åŠ£åŠ¿
- **Linuxä¸“ç”¨** - ä¸»è¦æ”¯æŒLinuxç³»ç»Ÿ
- **å­¦ä¹ æ›²çº¿** - éœ€è¦ç†è§£ç¡¬ä»¶å’Œå†…æ ¸æ¦‚å¿µ
- **æƒé™è¦æ±‚** - æŸäº›åŠŸèƒ½éœ€è¦ç‰¹æ®Šæƒé™
- **ç¬¦å·è§£æž** - éœ€è¦è°ƒè¯•ä¿¡æ¯æ‰èƒ½èŽ·å¾—å¥½çš„ç»“æžœ

#### ðŸŽ¯ æœ€ä½³é€‚ç”¨åœºæ™¯
```
âœ… é€‚åˆåœºæ™¯:
- LinuxçŽ¯å¢ƒçš„æ€§èƒ½åˆ†æž
- ç³»ç»Ÿçº§æ€§èƒ½è°ƒä¼˜
- å®žæ—¶æ€§èƒ½ç›‘æŽ§
- ç¼“å­˜å’Œå†…å­˜åˆ†æž
- å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ
- ç”Ÿäº§çŽ¯å¢ƒåˆ†æž

âŒ ä¸é€‚åˆåœºæ™¯:
- Windows/macOSçŽ¯å¢ƒ
- éœ€è¦æŒ‡ä»¤çº§ç²¾åº¦
- åˆå­¦è€…å…¥é—¨
- ç¦»çº¿è¯¦ç»†åˆ†æž
```

### ðŸ” Valgrind/Callgrind

#### âœ… ä¼˜åŠ¿
- **æžé«˜ç²¾åº¦** - æŒ‡ä»¤çº§çš„ç²¾ç¡®åˆ†æž
- **å®Œæ•´åˆ†æž** - åˆ†æžæ¯ä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œ
- **ç¼“å­˜æ¨¡æ‹Ÿ** - ç²¾ç¡®çš„ç¼“å­˜è¡Œä¸ºåˆ†æž
- **å¯è§†åŒ–å¼ºå¤§** - KCachegrindæä¾›ä¼˜ç§€çš„GUI
- **è·¨å¹³å°** - æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿ

#### âŒ åŠ£åŠ¿
- **è¿è¡Œæžæ…¢** - ç¨‹åºè¿è¡Œé€Ÿåº¦é™ä½Ž10-50å€
- **å†…å­˜å¼€é”€å¤§** - éœ€è¦å¤§é‡é¢å¤–å†…å­˜
- **ä¸é€‚åˆé•¿ç¨‹åº** - åªé€‚åˆåˆ†æžè¾ƒçŸ­çš„ç¨‹åºæ®µ
- **å®žæ—¶æ€§å·®** - ä¸æ”¯æŒå®žæ—¶åˆ†æž

#### ðŸŽ¯ æœ€ä½³é€‚ç”¨åœºæ™¯
```
âœ… é€‚åˆåœºæ™¯:
- ç®—æ³•æ€§èƒ½ç²¾ç¡®åˆ†æž
- ç¼“å­˜ä¼˜åŒ–ç ”ç©¶
- å­¦æœ¯ç ”ç©¶å’Œè®ºæ–‡
- ä»£ç ä¼˜åŒ–éªŒè¯
- å…³é”®å‡½æ•°æ·±åº¦åˆ†æž

âŒ ä¸é€‚åˆåœºæ™¯:
- é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åº
- å®žæ—¶ç³»ç»Ÿåˆ†æž
- ç”Ÿäº§çŽ¯å¢ƒç›‘æŽ§
- å¤§åž‹åº”ç”¨åˆ†æž
- æ—¶é—´æ•æ„Ÿçš„åœºæ™¯
```

### ðŸš€ Intel VTune

#### âœ… ä¼˜åŠ¿
- **åŠŸèƒ½æœ€å…¨é¢** - ä»Žç¡¬ä»¶åˆ°è½¯ä»¶çš„å®Œæ•´åˆ†æž
- **Intelä¼˜åŒ–** - é’ˆå¯¹Intel CPUæ·±åº¦ä¼˜åŒ–
- **ä¸“ä¸šGUI** - ä¸šç•Œæœ€å¥½çš„åˆ†æžç•Œé¢ä¹‹ä¸€
- **å¤šç»´åˆ†æž** - çƒ­ç‚¹ã€å†…å­˜ã€çº¿ç¨‹ã€å¾®æž¶æž„ç­‰
- **é›†æˆåº¦é«˜** - ä¸Žå¼€å‘å·¥å…·é“¾æ·±åº¦é›†æˆ

#### âŒ åŠ£åŠ¿
- **å•†ä¸šè½¯ä»¶** - å®Œæ•´åŠŸèƒ½éœ€è¦ä»˜è´¹
- **Intelåå‘** - åœ¨AMDå¤„ç†å™¨ä¸ŠåŠŸèƒ½å—é™
- **å¤æ‚åº¦é«˜** - å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜
- **èµ„æºæ¶ˆè€—** - å¯¹ç³»ç»Ÿèµ„æºè¦æ±‚è¾ƒé«˜

#### ðŸŽ¯ æœ€ä½³é€‚ç”¨åœºæ™¯
```
âœ… é€‚åˆåœºæ™¯:
- ä¼ä¸šçº§æ€§èƒ½ä¼˜åŒ–
- Intelå¹³å°æ·±åº¦è°ƒä¼˜
- é«˜æ€§èƒ½è®¡ç®—(HPC)
- å¤æ‚å¤šçº¿ç¨‹åº”ç”¨
- äº§å“å‘å¸ƒå‰éªŒè¯
- ä¸“ä¸šæ€§èƒ½å·¥ç¨‹

âŒ ä¸é€‚åˆåœºæ™¯:
- é¢„ç®—å—é™çš„é¡¹ç›®
- AMDå¹³å°ä¸»è¦åº”ç”¨
- ç®€å•ç¨‹åºåˆ†æž
- å­¦ç”Ÿå­¦ä¹ é¡¹ç›®
- å¼€æºé¡¹ç›®å¼€å‘
```

---

## ðŸŽ¯ åœºæ™¯åŒ–é€‰æ‹©æŒ‡å—

### ðŸ‘¨â€ðŸŽ“ åˆå­¦è€…å…¥é—¨è·¯å¾„

```
ç¬¬ä¸€é˜¶æ®µ - åŸºç¡€å­¦ä¹  (1-2å‘¨)
â”œâ”€â”€ gprof
â”‚   â”œâ”€â”€ å­¦ä¹ åŸºæœ¬æ¦‚å¿µ
â”‚   â”œâ”€â”€ ç†è§£å‡½æ•°çƒ­ç‚¹
â”‚   â””â”€â”€ æŽŒæ¡è°ƒç”¨å›¾åˆ†æž
â”‚
â””â”€â”€ ç®€å•é¡¹ç›®å®žè·µ
    â”œâ”€â”€ ç¼–å†™æµ‹è¯•ç¨‹åº
    â”œâ”€â”€ åˆ†æžæ€§èƒ½ç“¶é¢ˆ
    â””â”€â”€ éªŒè¯ä¼˜åŒ–æ•ˆæžœ

ç¬¬äºŒé˜¶æ®µ - è¿›é˜¶å­¦ä¹  (2-4å‘¨)  
â”œâ”€â”€ Linux perf
â”‚   â”œâ”€â”€ ç¡¬ä»¶æ€§èƒ½è®¡æ•°å™¨
â”‚   â”œâ”€â”€ ç¼“å­˜åˆ†æž
â”‚   â”œâ”€â”€ ç«ç„°å›¾ç”Ÿæˆ
â”‚   â””â”€â”€ ç³»ç»Ÿçº§ç›‘æŽ§
â”‚
â””â”€â”€ å®žé™…é¡¹ç›®åº”ç”¨
    â”œâ”€â”€ å¤šçº¿ç¨‹ç¨‹åºåˆ†æž
    â”œâ”€â”€ ç³»ç»Ÿæ€§èƒ½è°ƒä¼˜
    â””â”€â”€ æŒç»­æ€§èƒ½ç›‘æŽ§

ç¬¬ä¸‰é˜¶æ®µ - ä¸“ä¸šæ·±åŒ– (æŒ‰éœ€é€‰æ‹©)
â”œâ”€â”€ Valgrind/Callgrind
â”‚   â”œâ”€â”€ ç²¾ç¡®ç®—æ³•åˆ†æž
â”‚   â”œâ”€â”€ ç¼“å­˜ä¼˜åŒ–
â”‚   â””â”€â”€ å­¦æœ¯ç ”ç©¶
â”‚
â””â”€â”€ Intel VTune (æœ‰æ¡ä»¶)
    â”œâ”€â”€ ä¼ä¸šçº§åˆ†æž
    â”œâ”€â”€ å¤æ‚ä¼˜åŒ–é¡¹ç›®
    â””â”€â”€ é«˜æ€§èƒ½è®¡ç®—
```

### ðŸ¢ ä¼ä¸šçº§åº”ç”¨é€‰æ‹©

#### å¤§åž‹è½¯ä»¶å…¬å¸
```
æŽ¨èç»„åˆ: perf + VTune + è‡ªå®šä¹‰å·¥å…·é“¾

ç†ç”±:
âœ… perf - æ—¥å¸¸å¼€å‘å’ŒCI/CDé›†æˆ
âœ… VTune - æ·±åº¦ä¼˜åŒ–å’Œå‘å¸ƒå‰éªŒè¯  
âœ… è‡ªå®šä¹‰ç›‘æŽ§ - ç”Ÿäº§çŽ¯å¢ƒæŒç»­ç›‘æŽ§
âœ… æˆæœ¬å¯æŽ§ - ä¸“ä¸šå·¥å…·ROIæ˜Žç¡®
```

#### ä¸­å°åž‹å…¬å¸
```
æŽ¨èç»„åˆ: perf + Valgrind + å¼€æºå·¥å…·

ç†ç”±:
âœ… æˆæœ¬å‹å¥½ - ä¸»è¦ä½¿ç”¨å…è´¹å·¥å…·
âœ… åŠŸèƒ½å®Œæ•´ - è¦†ç›–å¤§éƒ¨åˆ†åˆ†æžéœ€æ±‚
âœ… å­¦ä¹ èµ„æºä¸°å¯Œ - ç¤¾åŒºæ”¯æŒå¥½
âœ… æ¸è¿›å¼å‡çº§ - å¯æŒ‰éœ€æ·»åŠ å•†ä¸šå·¥å…·
```

#### åˆåˆ›å…¬å¸
```
æŽ¨èç»„åˆ: gprof + perf

ç†ç”±:
âœ… é›¶æˆæœ¬ - å®Œå…¨å…è´¹çš„è§£å†³æ–¹æ¡ˆ
âœ… å¿«é€Ÿä¸Šæ‰‹ - å­¦ä¹ æˆæœ¬ä½Ž
âœ… æ»¡è¶³åŸºæœ¬éœ€æ±‚ - è¦†ç›–80%çš„åˆ†æžåœºæ™¯
âœ… ä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡ - ä¸åœ¨å·¥å…·ä¸Šè¿‡åº¦æŠ•èµ„
```

### ðŸ”¬ ç ”ç©¶å’Œå­¦æœ¯æœºæž„

#### é«˜æ€§èƒ½è®¡ç®—ç ”ç©¶
```
æŽ¨èç»„åˆ: VTune + Valgrind + è‡ªç ”å·¥å…·

ç†ç”±:
âœ… æœ€é«˜ç²¾åº¦ - å­¦æœ¯ç ”ç©¶éœ€è¦ç²¾ç¡®æ•°æ®
âœ… æ·±åº¦åˆ†æž - æ”¯æŒå¤æ‚çš„æ€§èƒ½æ¨¡åž‹
âœ… å¯é‡çŽ°æ€§ - ç ”ç©¶ç»“æžœå¯éªŒè¯
âœ… æ•™è‚²ä»·å€¼ - å­¦ç”Ÿå­¦ä¹ ä¸šç•Œæ ‡å‡†å·¥å…·
```

#### ç®—æ³•ç ”ç©¶
```
æŽ¨èç»„åˆ: Valgrind/Callgrind + perf

ç†ç”±:
âœ… æŒ‡ä»¤çº§ç²¾åº¦ - ç²¾ç¡®çš„ç®—æ³•å¤æ‚åº¦åˆ†æž
âœ… ç¼“å­˜åˆ†æž - æ·±å…¥ç†è§£å†…å­˜è®¿é—®æ¨¡å¼
âœ… å¯¹æ¯”éªŒè¯ - ä¸åŒç®—æ³•çš„ç²¾ç¡®å¯¹æ¯”
âœ… è®ºæ–‡æ•°æ® - æä¾›å¯ä¿¡çš„å®žéªŒæ•°æ®
```

---

## ðŸ› ï¸ å·¥å…·ç»„åˆç­–ç•¥

### ðŸ”„ äº’è¡¥å¼ç»„åˆ

#### å¼€å‘é˜¶æ®µå·¥å…·é“¾
```
å¼€å‘æ—©æœŸ: gprof
â”œâ”€â”€ å¿«é€Ÿè¯†åˆ«çƒ­ç‚¹
â”œâ”€â”€ éªŒè¯åŸºæœ¬æ€§èƒ½
â””â”€â”€ æŒ‡å¯¼æž¶æž„å†³ç­–

å¼€å‘ä¸­æœŸ: perf  
â”œâ”€â”€ è¯¦ç»†æ€§èƒ½åˆ†æž
â”œâ”€â”€ ç³»ç»Ÿçº§ä¼˜åŒ–
â””â”€â”€ æŒç»­ç›‘æŽ§

å‘å¸ƒå‰: VTune/Valgrind
â”œâ”€â”€ æ·±åº¦éªŒè¯ä¼˜åŒ–
â”œâ”€â”€ ç²¾ç¡®æ€§èƒ½æµ‹è¯•
â””â”€â”€ è´¨é‡ä¿è¯
```

#### é—®é¢˜è¯Šæ–­å·¥å…·é“¾
```
ç¬¬ä¸€æ­¥: perf top (å®žæ—¶ç›‘æŽ§)
â”œâ”€â”€ å¿«é€Ÿå®šä½ç³»ç»Ÿç“¶é¢ˆ
â”œâ”€â”€ ç¡®å®šé—®é¢˜èŒƒå›´
â””â”€â”€ å†³å®šæ·±å…¥åˆ†æžæ–¹å‘

ç¬¬äºŒæ­¥: perf record/report
â”œâ”€â”€ è¯¦ç»†çš„çƒ­ç‚¹åˆ†æž
â”œâ”€â”€ è°ƒç”¨æ ˆåˆ†æž  
â””â”€â”€ ç¡¬ä»¶äº‹ä»¶åˆ†æž

ç¬¬ä¸‰æ­¥: ä¸“ç”¨å·¥å…·æ·±å…¥åˆ†æž
â”œâ”€â”€ Valgrind - å†…å­˜å’Œç¼“å­˜
â”œâ”€â”€ VTune - å¾®æž¶æž„åˆ†æž
â””â”€â”€ è‡ªå®šä¹‰å·¥å…· - ç‰¹å®šé—®é¢˜
```

### ðŸ“Š å¤šç»´åº¦åˆ†æžç­–ç•¥

```bash
#!/bin/bash
# comprehensive_analysis.sh - ç»¼åˆæ€§èƒ½åˆ†æžè„šæœ¬

PROGRAM=$1
ANALYSIS_DIR="performance_analysis_$(date +%Y%m%d_%H%M%S)"

mkdir -p $ANALYSIS_DIR
cd $ANALYSIS_DIR

echo "=== ç»¼åˆæ€§èƒ½åˆ†æžå¼€å§‹ ==="

# ç¬¬ä¸€å±‚ï¼šå¿«é€Ÿçƒ­ç‚¹è¯†åˆ«
echo "1. å¿«é€Ÿçƒ­ç‚¹åˆ†æž (gprof)..."
g++ -pg -g -O2 ../$PROGRAM.cpp -o ${PROGRAM}_gprof
./${PROGRAM}_gprof
gprof ${PROGRAM}_gprof gmon.out > gprof_analysis.txt

# ç¬¬äºŒå±‚ï¼šç³»ç»Ÿçº§åˆ†æž
echo "2. ç³»ç»Ÿçº§æ€§èƒ½åˆ†æž (perf)..."
g++ -g -O2 ../$PROGRAM.cpp -o ${PROGRAM}_perf
perf record -g ./${PROGRAM}_perf
perf report --stdio > perf_analysis.txt
perf script > perf_script.txt

# ç¬¬ä¸‰å±‚ï¼šç²¾ç¡®åˆ†æžï¼ˆå¯é€‰ï¼‰
if [ "$2" == "deep" ]; then
    echo "3. ç²¾ç¡®æŒ‡ä»¤åˆ†æž (Callgrind)..."
    g++ -g -O1 ../$PROGRAM.cpp -o ${PROGRAM}_callgrind
    valgrind --tool=callgrind --callgrind-out-file=callgrind.out ./${PROGRAM}_callgrind
    callgrind_annotate callgrind.out > callgrind_analysis.txt
fi

# ç¬¬å››å±‚ï¼šä¸“ä¸šåˆ†æžï¼ˆå¦‚æžœå¯ç”¨ï¼‰
if command -v vtune >/dev/null 2>&1; then
    echo "4. ä¸“ä¸šæ€§èƒ½åˆ†æž (VTune)..."
    g++ -g -O2 ../$PROGRAM.cpp -o ${PROGRAM}_vtune
    vtune -collect=hotspots -result-dir=vtune_hotspots ./${PROGRAM}_vtune
    vtune -report=hotspots -result-dir=vtune_hotspots -format=csv > vtune_analysis.csv
fi

# ç”Ÿæˆç»¼åˆæŠ¥å‘Š
echo "5. ç”Ÿæˆç»¼åˆåˆ†æžæŠ¥å‘Š..."
cat > comprehensive_report.md << EOF
# ç»¼åˆæ€§èƒ½åˆ†æžæŠ¥å‘Š

## åˆ†æžæ¦‚è§ˆ

- **gprofåˆ†æž**: å¿«é€Ÿçƒ­ç‚¹è¯†åˆ«
- **perfåˆ†æž**: ç³»ç»Ÿçº§è¯¦ç»†åˆ†æž  
- **Callgrindåˆ†æž**: æŒ‡ä»¤çº§ç²¾ç¡®åˆ†æž (å¯é€‰)
- **VTuneåˆ†æž**: ä¸“ä¸šçº§æ·±åº¦åˆ†æž (å¦‚æžœå¯ç”¨)

## åˆ†æžæ–‡ä»¶

- \`gprof_analysis.txt\` - gprofçƒ­ç‚¹åˆ†æž
- \`perf_analysis.txt\` - perfè¯¦ç»†æŠ¥å‘Š
- \`perf_script.txt\` - perfåŽŸå§‹æ•°æ®
- \`callgrind_analysis.txt\` - Callgrindç²¾ç¡®åˆ†æž
- \`vtune_analysis.csv\` - VTuneä¸“ä¸šåˆ†æž

## ä¼˜åŒ–å»ºè®®

åŸºäºŽå¤šå·¥å…·åˆ†æžï¼Œå»ºè®®ä¼˜åŒ–é¡ºåºï¼š

1. **ç«‹å³ä¼˜åŒ–** - æ‰€æœ‰å·¥å…·éƒ½æ ‡è¯†çš„çƒ­ç‚¹
2. **æ·±å…¥åˆ†æž** - å·¥å…·é—´ç»“æžœæœ‰å·®å¼‚çš„å‡½æ•°  
3. **ç³»ç»Ÿä¼˜åŒ–** - perfæ ‡è¯†çš„ç³»ç»Ÿçº§ç“¶é¢ˆ
4. **å¾®è§‚ä¼˜åŒ–** - Callgrind/VTuneæ ‡è¯†çš„ç»†èŠ‚ä¼˜åŒ–

EOF

echo "=== ç»¼åˆåˆ†æžå®Œæˆ ==="
echo "ç»“æžœä¿å­˜åœ¨: $ANALYSIS_DIR/"
echo "æŸ¥çœ‹ç»¼åˆæŠ¥å‘Š: cat $ANALYSIS_DIR/comprehensive_report.md"
```

---

## ðŸ’¡ é€‰æ‹©å†³ç­–æ ‘

### ðŸŒ³ å·¥å…·é€‰æ‹©å†³ç­–æµç¨‹

```
å¼€å§‹æ€§èƒ½åˆ†æž
    â”‚
    â–¼
ä½ çš„ä¸»è¦ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ
    â”œâ”€â”€ å­¦ä¹ æ€§èƒ½åˆ†æž â†’ gprof (å…¥é—¨) â†’ perf (è¿›é˜¶)
    â”œâ”€â”€ å¿«é€Ÿæ‰¾çƒ­ç‚¹ â†’ perf hotspots
    â”œâ”€â”€ æ·±åº¦ç®—æ³•åˆ†æž â†’ Valgrind/Callgrind
    â”œâ”€â”€ ç”Ÿäº§çŽ¯å¢ƒç›‘æŽ§ â†’ perf + è‡ªå®šä¹‰ç›‘æŽ§
    â””â”€â”€ ä¼ä¸šçº§ä¼˜åŒ– â†’ VTune + perfç»„åˆ
    
ä½ çš„å¹³å°çŽ¯å¢ƒï¼Ÿ
    â”œâ”€â”€ Linux â†’ perf (é¦–é€‰) + Valgrind + gprof
    â”œâ”€â”€ Windows â†’ VTune + Visual Studio Profiler
    â”œâ”€â”€ macOS â†’ Instruments + gprof + Valgrind
    â””â”€â”€ è·¨å¹³å° â†’ Valgrind + gprof

ä½ çš„é¢„ç®—æƒ…å†µï¼Ÿ
    â”œâ”€â”€ æ— é¢„ç®— â†’ perf + gprof + Valgrind
    â”œâ”€â”€ æœ‰é™é¢„ç®— â†’ ä¸»è¦å…è´¹å·¥å…· + VTuneå…è´¹ç‰ˆ
    â””â”€â”€ å……è¶³é¢„ç®— â†’ VTuneä¸“ä¸šç‰ˆ + å…¨å¥—å·¥å…·

ä½ çš„æŠ€æœ¯æ°´å¹³ï¼Ÿ
    â”œâ”€â”€ åˆå­¦è€… â†’ gprof â†’ perf (ç®€å•åŠŸèƒ½)
    â”œâ”€â”€ æœ‰ç»éªŒ â†’ perf + Valgrind
    â””â”€â”€ ä¸“å®¶çº§ â†’ å…¨å¥—å·¥å…· + è‡ªå®šä¹‰è§£å†³æ–¹æ¡ˆ

ä½ çš„ç¨‹åºç‰¹ç‚¹ï¼Ÿ
    â”œâ”€â”€ CPUå¯†é›† â†’ gprof/perf + VTune
    â”œâ”€â”€ å†…å­˜å¯†é›† â†’ Valgrind + perf memory analysis
    â”œâ”€â”€ å¤šçº¿ç¨‹ â†’ perf + VTune threading analysis
    â”œâ”€â”€ I/Oå¯†é›† â†’ perf + ç³»ç»Ÿçº§å·¥å…·
    â””â”€â”€ ç®—æ³•ç ”ç©¶ â†’ Valgrind/Callgrind + ç²¾ç¡®å·¥å…·
```

---

## ðŸ“ˆ æ€§èƒ½åˆ†æžæˆç†Ÿåº¦æ¨¡åž‹

### ðŸŽ¯ Level 1 - åŸºç¡€çº§
```
å·¥å…·: gprof
èƒ½åŠ›:
- è¯†åˆ«åŸºæœ¬çƒ­ç‚¹å‡½æ•°
- ç†è§£å‡½æ•°è°ƒç”¨å…³ç³»
- è¿›è¡Œç®€å•çš„ä¼˜åŒ–éªŒè¯

é€‚åˆ:
- ä¸ªäººé¡¹ç›®
- å­¦ä¹ é˜¶æ®µ
- ç®€å•åº”ç”¨
```

### ðŸŽ¯ Level 2 - ä¸­çº§
```
å·¥å…·: perf + gprof
èƒ½åŠ›:
- ç³»ç»Ÿçº§æ€§èƒ½åˆ†æž
- ç¡¬ä»¶äº‹ä»¶ç›‘æŽ§
- å¤šç»´åº¦æ€§èƒ½å¯¹æ¯”
- å®žæ—¶æ€§èƒ½ç›‘æŽ§

é€‚åˆ:
- å°å›¢é˜Ÿé¡¹ç›®
- ä¸­ç­‰å¤æ‚åº¦åº”ç”¨
- æŒç»­é›†æˆæµæ°´çº¿
```

### ðŸŽ¯ Level 3 - é«˜çº§
```
å·¥å…·: perf + Valgrind + éƒ¨åˆ†å•†ä¸šå·¥å…·
èƒ½åŠ›:
- ç²¾ç¡®çš„ç®—æ³•åˆ†æž
- ç¼“å­˜å’Œå†…å­˜ä¼˜åŒ–
- å¤šçº¿ç¨‹æ€§èƒ½åˆ†æž
- è‡ªåŠ¨åŒ–åˆ†æžæµç¨‹

é€‚åˆ:
- ä¸­å¤§åž‹é¡¹ç›®
- æ€§èƒ½æ•æ„Ÿåº”ç”¨
- æŠ€æœ¯é©±åŠ¨çš„å›¢é˜Ÿ
```

### ðŸŽ¯ Level 4 - ä¸“å®¶çº§
```
å·¥å…·: å…¨å¥—å·¥å…· + è‡ªå®šä¹‰è§£å†³æ–¹æ¡ˆ
èƒ½åŠ›:
- å¾®æž¶æž„çº§ä¼˜åŒ–
- å¤§è§„æ¨¡ç³»ç»Ÿåˆ†æž
- æ€§èƒ½å›žå½’æ£€æµ‹
- ç«¯åˆ°ç«¯æ€§èƒ½å·¥ç¨‹

é€‚åˆ:
- å¤§åž‹ä¼ä¸š
- é«˜æ€§èƒ½è®¡ç®—
- æ€§èƒ½å…³é”®ç³»ç»Ÿ
- ç ”ç©¶æœºæž„
```

---

## ðŸ”— å·¥å…·èµ„æºæ±‡æ€»

### ðŸ“š å­¦ä¹ èµ„æº

#### å…è´¹èµ„æº
- [Brendan Gregg's Performance Tools](http://www.brendangregg.com/linuxperf.html)
- [Linux perf Examples](http://www.brendangregg.com/perf.html)
- [Valgrind User Manual](https://valgrind.org/docs/manual/)
- [GNU gprof Manual](https://sourceware.org/binutils/docs/gprof/)

#### ä»˜è´¹èµ„æº
- [Systems Performance by Brendan Gregg](https://www.brendangregg.com/systems-performance-2nd-edition-book.html)
- [Intel VTune Training](https://www.intel.com/content/www/us/en/developer/tools/oneapi/training/vtune-profiler.html)
- [Computer Systems: A Programmer's Perspective](https://csapp.cs.cmu.edu/)

### ðŸ› ï¸ å®žç”¨å·¥å…·é›†åˆ

#### å¯è§†åŒ–å·¥å…·
- [FlameGraph](https://github.com/brendangregg/FlameGraph) - ç«ç„°å›¾ç”Ÿæˆ
- [KCachegrind](https://kcachegrind.github.io/) - Callgrindå¯è§†åŒ–
- [Hotspot](https://github.com/KDAB/hotspot) - çŽ°ä»£æ€§èƒ½åˆ†æžGUI

#### è‡ªåŠ¨åŒ–å·¥å…·
- [perf-tools](https://github.com/brendangregg/perf-tools) - perfå·¥å…·é›†
- [pprof](https://github.com/google/pprof) - Googleæ€§èƒ½åˆ†æžå·¥å…·
- [gperftools](https://github.com/gperftools/gperftools) - Googleæ€§èƒ½å·¥å…·

---

## ðŸŽ¯ æ€»ç»“å»ºè®®

### ðŸš€ é€šç”¨æŽ¨èç­–ç•¥

#### å¯¹äºŽå¤§å¤šæ•°å¼€å‘è€…
```
åŸºç¡€ç»„åˆ: gprof + perf
- æˆæœ¬: å…è´¹
- å­¦ä¹ æˆæœ¬: ä¸­ç­‰
- è¦†ç›–èŒƒå›´: 80%çš„åˆ†æžéœ€æ±‚
- å¹³å°æ”¯æŒ: å¹¿æ³›
```

#### å¯¹äºŽæ€§èƒ½æ•æ„Ÿé¡¹ç›®
```
ä¸“ä¸šç»„åˆ: perf + VTune + Valgrind
- æˆæœ¬: éƒ¨åˆ†ä»˜è´¹
- å­¦ä¹ æˆæœ¬: é«˜
- è¦†ç›–èŒƒå›´: 95%çš„åˆ†æžéœ€æ±‚  
- åˆ†æžæ·±åº¦: ä¸“ä¸šçº§
```

#### å¯¹äºŽç ”ç©¶å’Œå­¦æœ¯
```
å®Œæ•´ç»„åˆ: å…¨å¥—å·¥å…· + è‡ªå®šä¹‰å·¥å…·
- æˆæœ¬: æ··åˆ
- å­¦ä¹ æˆæœ¬: å¾ˆé«˜
- è¦†ç›–èŒƒå›´: 100%çš„åˆ†æžéœ€æ±‚
- åˆ†æžç²¾åº¦: æœ€é«˜çº§
```

### ðŸ’¡ å…³é”®æˆåŠŸå› ç´ 

1. **æ¸è¿›å¼å­¦ä¹ ** - ä»Žç®€å•å·¥å…·å¼€å§‹ï¼Œé€æ­¥æŽŒæ¡å¤æ‚å·¥å…·
2. **ç»„åˆä½¿ç”¨** - æ²¡æœ‰å•ä¸€å·¥å…·èƒ½è§£å†³æ‰€æœ‰é—®é¢˜
3. **å®žè·µå¯¼å‘** - åœ¨å®žé™…é¡¹ç›®ä¸­å­¦ä¹ å’Œåº”ç”¨
4. **æŒç»­æ”¹è¿›** - å»ºç«‹æ€§èƒ½åˆ†æžçš„æ–‡åŒ–å’Œæµç¨‹
5. **å›¢é˜Ÿåä½œ** - åˆ†äº«çŸ¥è¯†å’Œæœ€ä½³å®žè·µ

è®°ä½ï¼š**æœ€å¥½çš„å·¥å…·æ˜¯ä½ ç†Ÿç»ƒæŽŒæ¡çš„å·¥å…·**ã€‚ä¸Žå…¶è¿½æ±‚æœ€æ–°æœ€å¤æ‚çš„å·¥å…·ï¼Œä¸å¦‚æ·±å…¥æŽŒæ¡é€‚åˆä½ éœ€æ±‚çš„å·¥å…·ç»„åˆï¼

---

*æœ€åŽæ›´æ–°ï¼š2024å¹´12æœˆ*  
*é€‚ç”¨åœºæ™¯ï¼šæ‰€æœ‰C++æ€§èƒ½åˆ†æžéœ€æ±‚*  
*æŽ¨èæ›´æ–°é¢‘çŽ‡ï¼šæ¯6ä¸ªæœˆé‡æ–°è¯„ä¼°å·¥å…·é€‰æ‹©*
