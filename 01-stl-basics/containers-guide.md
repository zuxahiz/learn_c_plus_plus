# C++ STL å®¹å™¨è¯¦è§£

## ğŸ¯ ä»€ä¹ˆæ˜¯STLå®¹å™¨ï¼Ÿ

STLå®¹å™¨æ˜¯ç”¨äºå­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ç±»æ¨¡æ¿ï¼Œå®ƒä»¬æä¾›äº†ç»Ÿä¸€çš„æ“ä½œæ¥å£ï¼Œéšè—äº†å†…éƒ¨å®ç°çš„å¤æ‚æ€§ã€‚å®¹å™¨æ˜¯STLçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œä¸ºç®—æ³•æä¾›äº†æ•°æ®å­˜å‚¨çš„åŸºç¡€ã€‚

## ğŸ”§ å®¹å™¨åˆ†ç±»

### 1. åºåˆ—å®¹å™¨ (Sequence Containers)
- **vector**: åŠ¨æ€æ•°ç»„ï¼Œæ”¯æŒéšæœºè®¿é—®
- **deque**: åŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒä¸¤ç«¯å¿«é€Ÿæ’å…¥åˆ é™¤
- **list**: åŒå‘é“¾è¡¨ï¼Œæ”¯æŒä»»æ„ä½ç½®æ’å…¥åˆ é™¤
- **forward_list**: å•å‘é“¾è¡¨ï¼ŒèŠ‚çœå†…å­˜

### 2. å…³è”å®¹å™¨ (Associative Containers)
- **set**: æœ‰åºé›†åˆï¼Œä¸å…è®¸é‡å¤
- **multiset**: æœ‰åºé›†åˆï¼Œå…è®¸é‡å¤
- **map**: æœ‰åºæ˜ å°„ï¼Œé”®å€¼å¯¹ï¼Œé”®å”¯ä¸€
- **multimap**: æœ‰åºæ˜ å°„ï¼Œé”®å€¼å¯¹ï¼Œé”®å¯é‡å¤

### 3. æ— åºå…³è”å®¹å™¨ (Unordered Associative Containers)
- **unordered_set**: æ— åºé›†åˆï¼ŒåŸºäºå“ˆå¸Œè¡¨
- **unordered_multiset**: æ— åºé›†åˆï¼Œå…è®¸é‡å¤
- **unordered_map**: æ— åºæ˜ å°„ï¼ŒåŸºäºå“ˆå¸Œè¡¨
- **unordered_multimap**: æ— åºæ˜ å°„ï¼Œé”®å¯é‡å¤

### 4. å®¹å™¨é€‚é…å™¨ (Container Adapters)
- **stack**: æ ˆï¼Œåè¿›å…ˆå‡º
- **queue**: é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡º
- **priority_queue**: ä¼˜å…ˆçº§é˜Ÿåˆ—

## ğŸ“š åºåˆ—å®¹å™¨è¯¦è§£

### Vectorï¼ˆåŠ¨æ€æ•°ç»„ï¼‰
```cpp
#include <vector>
using namespace std;

// åˆ›å»ºå’Œåˆå§‹åŒ–
vector<int> v1;                           // ç©ºvector
vector<int> v2(10);                       // 10ä¸ªå…ƒç´ ï¼Œåˆå§‹å€¼ä¸º0
vector<int> v3(10, 5);                    // 10ä¸ªå…ƒç´ ï¼Œåˆå§‹å€¼ä¸º5
vector<int> v4 = {1, 2, 3, 4, 5};        // åˆ—è¡¨åˆå§‹åŒ–

// åŸºæœ¬æ“ä½œ
v1.push_back(10);                         // æœ«å°¾æ·»åŠ å…ƒç´ 
v1.insert(v1.begin() + 1, 20);           // æŒ‡å®šä½ç½®æ’å…¥
v1.pop_back();                            // åˆ é™¤æœ«å°¾å…ƒç´ 
v1.erase(v1.begin() + 1);                // åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ 

// è®¿é—®å…ƒç´ 
int first = v4[0];                        // ä¸‹æ ‡è®¿é—®
int second = v4.at(1);                    // è¾¹ç•Œæ£€æŸ¥è®¿é—®
int front = v4.front();                   // ç¬¬ä¸€ä¸ªå…ƒç´ 
int back = v4.back();                     // æœ€åä¸€ä¸ªå…ƒç´ 

// å®¹é‡æ“ä½œ
v1.reserve(100);                          // é¢„ç•™ç©ºé—´
v1.resize(20);                            // è°ƒæ•´å¤§å°
cout << "Size: " << v1.size() << endl;    // å½“å‰å¤§å°
cout << "Capacity: " << v1.capacity() << endl;  // å½“å‰å®¹é‡
```

**ç‰¹æ€§**:
- è¿ç»­å†…å­˜å­˜å‚¨ï¼Œæ”¯æŒéšæœºè®¿é—®
- åŠ¨æ€æ‰©å®¹ï¼Œè‡ªåŠ¨ç®¡ç†å†…å­˜
- æœ«å°¾æ“ä½œé«˜æ•ˆï¼Œä¸­é—´æ“ä½œè¾ƒæ…¢
- ç¼“å­˜å‹å¥½ï¼Œé€‚åˆé¢‘ç¹è®¿é—®

### Dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰
```cpp
#include <deque>
using namespace std;

deque<int> dq = {1, 2, 3, 4, 5};

// åŒç«¯æ“ä½œ
dq.push_front(0);                         // å‰ç«¯æ·»åŠ 
dq.push_back(6);                          // åç«¯æ·»åŠ 
dq.pop_front();                           // å‰ç«¯åˆ é™¤
dq.pop_back();                            // åç«¯åˆ é™¤

// éšæœºè®¿é—®
int first = dq[0];
int last = dq[dq.size() - 1];
```

**ç‰¹æ€§**:
- æ”¯æŒä¸¤ç«¯é«˜æ•ˆæ’å…¥åˆ é™¤
- æ”¯æŒéšæœºè®¿é—®
- å†…å­˜ä¸è¿ç»­ï¼Œä½†åˆ†æ®µè¿ç»­
- æ¯”vectorç¨æ…¢ï¼Œä½†æ›´çµæ´»

### Listï¼ˆåŒå‘é“¾è¡¨ï¼‰
```cpp
#include <list>
using namespace std;

list<int> lst = {1, 2, 3, 4, 5};

// ä»»æ„ä½ç½®æ“ä½œ
auto it = lst.begin();
advance(it, 2);                           // ç§»åŠ¨åˆ°ç¬¬3ä¸ªä½ç½®
lst.insert(it, 10);                       // åœ¨æŒ‡å®šä½ç½®æ’å…¥
lst.erase(it);                            // åˆ é™¤æŒ‡å®šä½ç½®

// é“¾è¡¨ç‰¹æœ‰æ“ä½œ
lst.splice(lst.begin(), lst, it);         // ç§»åŠ¨å…ƒç´ 
lst.reverse();                            // åè½¬é“¾è¡¨
lst.sort();                               // æ’åº
lst.unique();                             // å»é‡
```

**ç‰¹æ€§**:
- ä»»æ„ä½ç½®æ’å…¥åˆ é™¤é«˜æ•ˆ
- ä¸æ”¯æŒéšæœºè®¿é—®
- å†…å­˜ä¸è¿ç»­
- è¿­ä»£å™¨ç¨³å®šï¼Œæ’å…¥åˆ é™¤ä¸å½±å“å…¶ä»–è¿­ä»£å™¨

## ğŸ“š å…³è”å®¹å™¨è¯¦è§£

### Setï¼ˆæœ‰åºé›†åˆï¼‰
```cpp
#include <set>
using namespace std;

set<int> s = {3, 1, 4, 1, 5, 9, 2, 6};  // è‡ªåŠ¨æ’åºå»é‡

// åŸºæœ¬æ“ä½œ
s.insert(7);                              // æ’å…¥å…ƒç´ 
s.erase(3);                               // åˆ é™¤å…ƒç´ 
auto it = s.find(4);                      // æŸ¥æ‰¾å…ƒç´ 

// è¾¹ç•Œæ“ä½œ
auto lower = s.lower_bound(4);            // ç¬¬ä¸€ä¸ªä¸å°äº4çš„å…ƒç´ 
auto upper = s.upper_bound(4);            // ç¬¬ä¸€ä¸ªå¤§äº4çš„å…ƒç´ 
auto range = s.equal_range(4);            // ç­‰äº4çš„å…ƒç´ èŒƒå›´

// é›†åˆè¿ç®—
set<int> s2 = {4, 5, 6, 7, 8};
set<int> result;
set_union(s.begin(), s.end(), s2.begin(), s2.end(), 
          inserter(result, result.begin()));  // å¹¶é›†
```

**ç‰¹æ€§**:
- åŸºäºçº¢é»‘æ ‘å®ç°
- è‡ªåŠ¨æ’åºï¼Œä¸å…è®¸é‡å¤
- æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤éƒ½æ˜¯O(log n)
- æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œé›†åˆè¿ç®—

### Mapï¼ˆæœ‰åºæ˜ å°„ï¼‰
```cpp
#include <map>
using namespace std;

map<string, int> m = {
    {"apple", 1},
    {"banana", 2},
    {"cherry", 3}
};

// åŸºæœ¬æ“ä½œ
m["orange"] = 4;                          // æ’å…¥æˆ–ä¿®æ”¹
m.insert({"grape", 5});                   // æ’å…¥
m.erase("banana");                        // åˆ é™¤

// è®¿é—®å…ƒç´ 
int value = m["apple"];                   // å¦‚æœä¸å­˜åœ¨ä¼šåˆ›å»º
auto it = m.find("pear");                 // å®‰å…¨æŸ¥æ‰¾
if (it != m.end()) {
    cout << it->first << ": " << it->second << endl;
}

// éå†
for (const auto& [key, val] : m) {       // C++17ç»“æ„åŒ–ç»‘å®š
    cout << key << ": " << val << endl;
}
```

**ç‰¹æ€§**:
- é”®å€¼å¯¹å­˜å‚¨ï¼Œé”®å”¯ä¸€
- åŸºäºçº¢é»‘æ ‘ï¼Œè‡ªåŠ¨æŒ‰é”®æ’åº
- æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œæœ‰åºéå†
- æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤éƒ½æ˜¯O(log n)

## ğŸ“š æ— åºå…³è”å®¹å™¨è¯¦è§£

### Unordered Set/Map
```cpp
#include <unordered_set>
#include <unordered_map>
using namespace std;

unordered_set<int> us = {1, 2, 3, 4, 5};
unordered_map<string, int> um = {
    {"apple", 1},
    {"banana", 2}
};

// åŸºæœ¬æ“ä½œä¸æœ‰åºå®¹å™¨ç±»ä¼¼
us.insert(6);
um["cherry"] = 3;

// å“ˆå¸Œè¡¨ç‰¹æœ‰æ“ä½œ
us.reserve(100);                          // é¢„ç•™ç©ºé—´
cout << "Load factor: " << us.load_factor() << endl;
us.max_load_factor(0.5);                  // è®¾ç½®æœ€å¤§è´Ÿè½½å› å­
```

**ç‰¹æ€§**:
- åŸºäºå“ˆå¸Œè¡¨å®ç°
- å¹³å‡O(1)çš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤
- ä¸æ”¯æŒæ’åºå’ŒèŒƒå›´æŸ¥è¯¢
- å†…å­˜æ•ˆç‡è¾ƒé«˜

## ğŸ“š å®¹å™¨é€‚é…å™¨è¯¦è§£

### Stackï¼ˆæ ˆï¼‰
```cpp
#include <stack>
using namespace std;

stack<int> st;
st.push(1);                               // å…¥æ ˆ
st.push(2);
st.push(3);

cout << "Top: " << st.top() << endl;      // æŸ¥çœ‹æ ˆé¡¶
st.pop();                                 // å‡ºæ ˆ
cout << "Size: " << st.size() << endl;    // å¤§å°
cout << "Empty: " << st.empty() << endl;  // æ˜¯å¦ä¸ºç©º
```

### Queueï¼ˆé˜Ÿåˆ—ï¼‰
```cpp
#include <queue>
using namespace std;

queue<int> q;
q.push(1);                                // å…¥é˜Ÿ
q.push(2);
q.push(3);

cout << "Front: " << q.front() << endl;   // é˜Ÿé¦–
cout << "Back: " << q.back() << endl;     // é˜Ÿå°¾
q.pop();                                  // å‡ºé˜Ÿ
```

### Priority Queueï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰
```cpp
#include <queue>
using namespace std;

priority_queue<int> pq;                   // é»˜è®¤æœ€å¤§å †
pq.push(3);
pq.push(1);
pq.push(5);
pq.push(2);

cout << "Top: " << pq.top() << endl;      // æœ€å¤§å…ƒç´ 
pq.pop();                                 // åˆ é™¤æœ€å¤§å…ƒç´ 

// æœ€å°å †
priority_queue<int, vector<int>, greater<int>> min_pq;
```

## âš¡ å®¹å™¨é€‰æ‹©æŒ‡å—

### é€‰æ‹©æ ‡å‡†
1. **è®¿é—®æ¨¡å¼**: éšæœºè®¿é—®é€‰vectorï¼Œé¡ºåºè®¿é—®é€‰list
2. **æ’å…¥åˆ é™¤**: é¢‘ç¹ä¸­é—´æ“ä½œé€‰listï¼Œé¢‘ç¹æœ«å°¾æ“ä½œé€‰vector
3. **æŸ¥æ‰¾éœ€æ±‚**: éœ€è¦æ’åºé€‰set/mapï¼Œåªéœ€è¦å­˜åœ¨æ€§æ£€æŸ¥é€‰unordered_set/map
4. **å†…å­˜è¦æ±‚**: å†…å­˜æ•æ„Ÿé€‰listï¼Œç¼“å­˜å‹å¥½é€‰vector
5. **æ€§èƒ½è¦æ±‚**: å¯¹æ€§èƒ½è¦æ±‚é«˜é€‰unorderedå®¹å™¨ï¼Œéœ€è¦æœ‰åºé€‰æœ‰åºå®¹å™¨

### æ€§èƒ½å¯¹æ¯”
| å®¹å™¨ | éšæœºè®¿é—® | æ’å…¥åˆ é™¤ | æŸ¥æ‰¾ | å†…å­˜æ•ˆç‡ |
|------|----------|----------|------|----------|
| vector | O(1) | O(n) | O(n) | é«˜ |
| deque | O(1) | O(1) | O(n) | ä¸­ |
| list | O(n) | O(1) | O(n) | ä½ |
| set/map | O(log n) | O(log n) | O(log n) | ä¸­ |
| unordered_set/map | O(1) | O(1) | O(1) | ä¸­ |

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. é¢„åˆ†é…ç©ºé—´
```cpp
vector<int> v;
v.reserve(1000);                          // é¿å…é¢‘ç¹æ‰©å®¹
for (int i = 0; i < 1000; ++i) {
    v.push_back(i);
}
```

### 2. é€‰æ‹©åˆé€‚çš„å®¹å™¨
```cpp
// éœ€è¦é¢‘ç¹æŸ¥æ‰¾
unordered_set<int> us;
for (int i = 0; i < 1000; ++i) {
    us.insert(i);
}

// éœ€è¦æœ‰åºéå†
set<int> s;
for (int i = 0; i < 1000; ++i) {
    s.insert(i);
}
```

### 3. é¿å…å¸¸è§é”™è¯¯
```cpp
// é”™è¯¯ï¼šåœ¨éå†æ—¶ä¿®æ”¹å®¹å™¨
vector<int> v = {1, 2, 3, 4, 5};
for (auto it = v.begin(); it != v.end(); ++it) {
    if (*it % 2 == 0) {
        v.erase(it);                      // é”™è¯¯ï¼è¿­ä»£å™¨å¤±æ•ˆ
    }
}

// æ­£ç¡®åšæ³•
v.erase(remove_if(v.begin(), v.end(), 
                  [](int x) { return x % 2 == 0; }), v.end());
```

## ğŸ¯ é€‚ç”¨åœºæ™¯æ€»ç»“

### Vectoré€‚ç”¨åœºæ™¯
- éœ€è¦éšæœºè®¿é—®
- å¤§å°ä¸å›ºå®š
- ä¸»è¦åœ¨æœ«å°¾æ“ä½œ
- éœ€è¦è‰¯å¥½çš„ç¼“å­˜æ€§èƒ½

### Listé€‚ç”¨åœºæ™¯
- é¢‘ç¹åœ¨ä»»æ„ä½ç½®æ’å…¥åˆ é™¤
- ä¸éœ€è¦éšæœºè®¿é—®
- è¿­ä»£å™¨ç¨³å®šæ€§è¦æ±‚é«˜

### Set/Mapé€‚ç”¨åœºæ™¯
- éœ€è¦è‡ªåŠ¨æ’åº
- éœ€è¦å»é‡
- éœ€è¦èŒƒå›´æŸ¥è¯¢
- æŸ¥æ‰¾æ“ä½œé¢‘ç¹

### Unorderedå®¹å™¨é€‚ç”¨åœºæ™¯
- ä¸éœ€è¦æ’åº
- éœ€è¦O(1)çš„æŸ¥æ‰¾æ€§èƒ½
- å†…å­˜æ•ˆç‡è¦æ±‚é«˜

## ğŸš€ ä¸‹ä¸€æ­¥
- å­¦ä¹  [è¿­ä»£å™¨è¯¦è§£](./iterators-guide.md)
- äº†è§£ [ç®—æ³•è¯¦è§£](./algorithms-guide.md)
- æŒæ¡ [åˆ†é…å™¨è¯¦è§£](./allocators-guide.md)
