# C++ Set å’Œ Map å®¹å™¨è¯¦è§£

## ğŸ¯ ä»€ä¹ˆæ˜¯Setå’ŒMapï¼Ÿ

### Setï¼ˆé›†åˆï¼‰
- **æœ‰åºé›†åˆ**: å…ƒç´ è‡ªåŠ¨æ’åºï¼Œä¸å…è®¸é‡å¤
- **åŸºäºçº¢é»‘æ ‘**: å†…éƒ¨ä½¿ç”¨çº¢é»‘æ ‘å®ç°ï¼Œä¿è¯O(log n)çš„æ“ä½œå¤æ‚åº¦
- **å”¯ä¸€æ€§**: æ¯ä¸ªå…ƒç´ åœ¨é›†åˆä¸­åªèƒ½å‡ºç°ä¸€æ¬¡

### Mapï¼ˆæ˜ å°„ï¼‰
- **é”®å€¼å¯¹å®¹å™¨**: å­˜å‚¨key-valueå¯¹ï¼Œkeyå”¯ä¸€
- **æœ‰åºå­˜å‚¨**: æŒ‰keyè‡ªåŠ¨æ’åº
- **å¿«é€ŸæŸ¥æ‰¾**: åŸºäºkeyçš„å¿«é€ŸæŸ¥æ‰¾å’Œè®¿é—®

## ğŸ”§ åŸºæœ¬ç‰¹æ€§

### Setç‰¹æ€§
- **è‡ªåŠ¨æ’åº**: å…ƒç´ æŒ‰å‡åºæ’åˆ—
- **å”¯ä¸€æ€§**: ä¸å…è®¸é‡å¤å…ƒç´ 
- **ä¸å¯ä¿®æ”¹**: ä¸èƒ½ç›´æ¥ä¿®æ”¹å…ƒç´ å€¼
- **è¿­ä»£å™¨ç¨³å®š**: æ’å…¥/åˆ é™¤ä¸ä¼šä½¿å…¶ä»–è¿­ä»£å™¨å¤±æ•ˆ

### Mapç‰¹æ€§
- **é”®å€¼å¯¹**: æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªpair<key, value>
- **é”®å”¯ä¸€**: æ¯ä¸ªkeyåªèƒ½å¯¹åº”ä¸€ä¸ªvalue
- **è‡ªåŠ¨æ’åº**: æŒ‰keyå‡åºæ’åˆ—
- **å¿«é€ŸæŸ¥æ‰¾**: O(log n)æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾

## ğŸ“š å¸¸ç”¨æ“ä½œ

### 1. Setçš„åŸºæœ¬æ“ä½œ
```cpp
#include <set>
using namespace std;

// åˆ›å»ºå’Œåˆå§‹åŒ–
set<int> s1;                           // ç©ºé›†åˆ
set<int> s2 = {3, 1, 4, 1, 5};        // è‡ªåŠ¨å»é‡å’Œæ’åºï¼š{1, 3, 4, 5}

// æ’å…¥å…ƒç´ 
s1.insert(10);                         // æ’å…¥å•ä¸ªå…ƒç´ 
s1.insert({20, 30, 40});              // æ’å…¥å¤šä¸ªå…ƒç´ 

// æŸ¥æ‰¾å…ƒç´ 
auto it = s1.find(20);                 // è¿”å›è¿­ä»£å™¨ï¼Œæœªæ‰¾åˆ°è¿”å›end()
if (it != s1.end()) {
    cout << "Found: " << *it << endl;
}

// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
if (s1.count(20)) {                    // è¿”å›0æˆ–1
    cout << "20 exists" << endl;
}

// åˆ é™¤å…ƒç´ 
s1.erase(20);                          // åˆ é™¤å€¼ä¸º20çš„å…ƒç´ 
s1.erase(it);                          // åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ 

// éå†
for (const auto& element : s1) {
    cout << element << " ";
}
```

### 2. Mapçš„åŸºæœ¬æ“ä½œ
```cpp
#include <map>
using namespace std;

// åˆ›å»ºå’Œåˆå§‹åŒ–
map<string, int> m1;                   // ç©ºæ˜ å°„
map<string, int> m2 = {
    {"apple", 1},
    {"banana", 2},
    {"cherry", 3}
};

// æ’å…¥å…ƒç´ 
m1["orange"] = 4;                      // ä½¿ç”¨ä¸‹æ ‡æ“ä½œç¬¦
m1.insert({"grape", 5});               // ä½¿ç”¨insertæ–¹æ³•
m1.insert({"orange", 6});              // ä¸ä¼šè¦†ç›–å·²å­˜åœ¨çš„key

// è®¿é—®å…ƒç´ 
int value = m1["orange"];              // å¦‚æœkeyä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºå¹¶åˆå§‹åŒ–ä¸º0
int value2 = m1.at("banana");          // å¦‚æœkeyä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸

// å®‰å…¨è®¿é—®
auto it = m1.find("pear");
if (it != m1.end()) {
    cout << "Value: " << it->second << endl;
}

// ä¿®æ”¹å…ƒç´ 
m1["orange"] = 10;                     // ä¿®æ”¹å·²å­˜åœ¨çš„å€¼

// åˆ é™¤å…ƒç´ 
m1.erase("orange");                    // åˆ é™¤æŒ‡å®škeyçš„å…ƒç´ 

// éå†
for (const auto& pair : m1) {
    cout << pair.first << ": " << pair.second << endl;
}

// ä½¿ç”¨ç»“æ„åŒ–ç»‘å®š(C++17)
for (const auto& [key, value] : m1) {
    cout << key << ": " << value << endl;
}
```

## âš¡ æ€§èƒ½åˆ†æ

### æ—¶é—´å¤æ‚åº¦
- **æŸ¥æ‰¾**: O(log n)
- **æ’å…¥**: O(log n)
- **åˆ é™¤**: O(log n)
- **éå†**: O(n)

### ç©ºé—´å¤æ‚åº¦
- **å­˜å‚¨**: O(n)
- **æ¯ä¸ªèŠ‚ç‚¹**: é¢å¤–å­˜å‚¨å¹³è¡¡ä¿¡æ¯

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
```cpp
// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
struct Compare {
    bool operator()(const string& a, const string& b) const {
        return a.length() < b.length();  // æŒ‰é•¿åº¦æ’åº
    }
};

set<string, Compare> s;
s.insert({"apple", "banana", "cherry"});  // æŒ‰é•¿åº¦æ’åº

// å¯¹äºmap
map<string, int, Compare> m;
```

### 2. ä½¿ç”¨emplaceæé«˜æ•ˆç‡
```cpp
// å¯¹äºå¤æ‚å¯¹è±¡ï¼Œemplaceæ›´é«˜æ•ˆ
set<pair<int, string>> s;
s.emplace(1, "hello");  // ç›´æ¥åœ¨å®¹å™¨ä¸­æ„é€ å¯¹è±¡

map<int, string> m;
m.emplace(1, "world");  // ç›´æ¥åœ¨å®¹å™¨ä¸­æ„é€ å¯¹è±¡
```

### 3. è¾¹ç•Œæ“ä½œ
```cpp
set<int> s = {1, 3, 5, 7, 9};

// æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å°äºç»™å®šå€¼çš„å…ƒç´ 
auto it = s.lower_bound(4);  // è¿”å›æŒ‡å‘5çš„è¿­ä»£å™¨

// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç»™å®šå€¼çš„å…ƒç´ 
auto it2 = s.upper_bound(4); // è¿”å›æŒ‡å‘5çš„è¿­ä»£å™¨

// æ‰¾åˆ°ç­‰äºç»™å®šå€¼çš„èŒƒå›´
auto range = s.equal_range(5); // è¿”å›pair<iterator, iterator>
```

## ğŸ¯ é€‚ç”¨åœºæ™¯

### Seté€‚ç”¨åœºæ™¯
- **éœ€è¦å»é‡**: å»é™¤é‡å¤å…ƒç´ 
- **éœ€è¦æ’åº**: è‡ªåŠ¨ç»´æŠ¤æœ‰åºæ€§
- **å¿«é€ŸæŸ¥æ‰¾**: é¢‘ç¹çš„æŸ¥æ‰¾æ“ä½œ
- **é›†åˆè¿ç®—**: äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰

### Mapé€‚ç”¨åœºæ™¯
- **é”®å€¼æ˜ å°„**: éœ€è¦å»ºç«‹key-valueå…³ç³»
- **å­—å…¸åŠŸèƒ½**: ç±»ä¼¼Pythonçš„dict
- **è®¡æ•°ç»Ÿè®¡**: ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°
- **ç¼“å­˜å®ç°**: å­˜å‚¨è®¡ç®—ç»“æœ

## âŒ ä¸é€‚ç”¨åœºæ™¯
- **é¢‘ç¹æ’å…¥/åˆ é™¤**: è€ƒè™‘ä½¿ç”¨unorderedå®¹å™¨
- **ä¸éœ€è¦æ’åº**: è€ƒè™‘ä½¿ç”¨unorderedå®¹å™¨
- **å†…å­˜æ•æ„Ÿ**: çº¢é»‘æ ‘æœ‰é¢å¤–çš„å†…å­˜å¼€é”€

## ğŸ” å¸¸è§é”™è¯¯

### 1. è¿­ä»£å™¨å¤±æ•ˆ
```cpp
// é”™è¯¯ï¼šåœ¨éå†æ—¶åˆ é™¤å…ƒç´ 
set<int> s = {1, 2, 3, 4, 5};
for (auto it = s.begin(); it != s.end(); ++it) {
    if (*it % 2 == 0) {
        s.erase(it);  // é”™è¯¯ï¼è¿­ä»£å™¨å¤±æ•ˆ
    }
}

// æ­£ç¡®åšæ³•
for (auto it = s.begin(); it != s.end();) {
    if (*it % 2 == 0) {
        it = s.erase(it);  // eraseè¿”å›ä¸‹ä¸€ä¸ªæœ‰æ•ˆè¿­ä»£å™¨
    } else {
        ++it;
    }
}
```

### 2. è®¿é—®ä¸å­˜åœ¨çš„key
```cpp
map<string, int> m;
int value = m["nonexistent"];  // ä¼šåˆ›å»ºkeyå¹¶åˆå§‹åŒ–ä¸º0

// å®‰å…¨åšæ³•
auto it = m.find("nonexistent");
if (it != m.end()) {
    value = it->second;
}
```

## ğŸ“ å®é™…åº”ç”¨ç¤ºä¾‹

### 1. ç»Ÿè®¡å•è¯é¢‘ç‡
```cpp
map<string, int> wordCount;
string word;

while (cin >> word) {
    wordCount[word]++;
}

// è¾“å‡ºç»“æœ
for (const auto& [word, count] : wordCount) {
    cout << word << ": " << count << endl;
}
```

### 2. å»é‡å¹¶æ’åº
```cpp
vector<int> numbers = {3, 1, 4, 1, 5, 9, 2, 6};
set<int> uniqueNumbers(numbers.begin(), numbers.end());

// è½¬æ¢å›vector
vector<int> result(uniqueNumbers.begin(), uniqueNumbers.end());
```

### 3. æŸ¥æ‰¾æœ€è¿‘çš„å€¼
```cpp
set<int> s = {1, 3, 5, 7, 9};
int target = 4;

auto it = s.lower_bound(target);
if (it != s.begin()) {
    auto prev = prev(it);
    int closest = (target - *prev < *it - target) ? *prev : *it;
    cout << "Closest: " << closest << endl;
}
```

## ğŸ“ ç»ƒä¹ é¢˜ç›®
1. å®ç°ä¸€ä¸ªç®€å•çš„setç±»
2. ä½¿ç”¨mapç»Ÿè®¡å­—ç¬¦é¢‘ç‡
3. å®ç°é›†åˆçš„äº¤é›†ã€å¹¶é›†ã€å·®é›†æ“ä½œ

## ğŸš€ ä¸‹ä¸€æ­¥
- å­¦ä¹  [unorderedå®¹å™¨](./unordered-guide.md)
- äº†è§£ [å®¹å™¨é€‚é…å™¨](./adapters-guide.md)
- å¼€å§‹ [æ•°æ®ç»“æ„å®ç°](../02-data-structures/)
